"use strict";var app=function(){var appName="Receptář",appVersion="23.04.02.002514",appOwner="Tomáš 'Stínolez' Vitásek",loader=document.querySelector(".loader");function createElement(elementType,data){let element=document.createElement(elementType);switch(elementType){case"div":case"span":case"tr":case"td":case"li":element.className=data[0],element.innerHTML=data[2];let attributes=JSON.parse(data[1]);for(let attr in attributes)-1===attr.indexOf("data-")?element[attr]=attributes[attr]:element.dataset[attr.replace("data-","")]=attributes[attr];break;case"ul":case"ol":let listData=data[1];element.className=data[0];for(let i=0;i<listData.length;i++){let sub=createElement("li",listData[i]);element.appendChild(sub)}}return element}function showLoader(){loader.hidden=!1}function hideLoader(){loader.hidden=!0}function loadJSON(callback,filepath){var xobj=new XMLHttpRequest;xobj.overrideMimeType("application/json"),xobj.open("GET",filepath,!0),xobj.onreadystatechange=function(){4==xobj.readyState&&"200"==xobj.status&&callback(xobj.responseText)},xobj.send(null)}function sortByKey(array,key){return array.sort((function(a,b){let x=a[key].toLowerCase(),y=b[key].toLowerCase();return x<y?-1:x>y?1:0}))}function registerRecipes(json){let data=JSON.parse(json).data,recipes=document.getElementById("recipes");data=sortByKey(data,"name");for(let i=0;i<data.length;i++){let name=data[i].name,attr={"data-tags":name.toLowerCase()+"|"+data[i].tags.join("|").toLowerCase(),"data-uid":data[i].uid},recipe=createElement("div",["recipe",JSON.stringify(attr),name]);recipes.appendChild(recipe)}if(document.getElementsByClassName("recipe").length>0)for(let i=0;i<document.getElementsByClassName("recipe").length;i++)document.getElementsByClassName("recipe")[i].addEventListener("click",(function(e){location.href="recipe.html?uid="+e.target.dataset.uid}))}function registerRecipe(json){let data=JSON.parse(json);document.getElementsByTagName("h1")[0].innerText=data.name}return{getAppName:function(){return appName},getAppVersion:function(){return appVersion},getAppOwner:function(){return appOwner},createElement:function(elementType,data){return createElement(elementType,data)},setLoading:function(bool){bool?showLoader():hideLoader()},init:function(){if(showLoader(),document.getElementById("copyright").innerHTML=app.getAppName()+", v."+app.getAppVersion()+", &copy; "+app.getAppOwner()+", "+(new Date).getFullYear(),document.getElementById("headerBack")&&document.getElementById("headerBack").addEventListener("click",(function(e){location.href=e.target.dataset.url})),document.getElementById("headerSearch")&&document.getElementById("headerSearch").addEventListener("click",(function(e){let title=document.getElementsByClassName("headerTitle")[0].style.display||"block",search=document.getElementsByClassName("headerSearchBox")[0].style.display||"none";document.getElementsByClassName("headerTitle")[0].style.display="block"===title?"none":"block",document.getElementsByClassName("headerSearchBox")[0].style.display="flex"===search?"none":"flex","flex"===document.getElementsByClassName("headerSearchBox")[0].style.display?document.getElementById("recipeSearch").focus():(document.getElementById("recipeSearch").value="",document.getElementById("recipeSearch").dispatchEvent(new KeyboardEvent("keyup",{keyCode:70,ctrlKey:!0})))})),document.getElementById("recipeSearch")&&document.getElementById("recipeSearch").addEventListener("keyup",(function(e){let search=document.getElementById("recipeSearch").value.toLowerCase();if(""!==search)for(let i=0;i<document.getElementsByClassName("recipe").length;i++){let tags,matches;0===document.getElementsByClassName("recipe")[i].dataset.tags.split("|").filter(s=>s.includes(search)).length?document.getElementsByClassName("recipe")[i].style.display="none":document.getElementsByClassName("recipe")[i].style.display="block"}else for(let i=0;i<document.getElementsByClassName("recipe").length;i++)document.getElementsByClassName("recipe")[i].style.display="block"})),document.getElementById("recipes")&&loadJSON(registerRecipes,"../data/_main.json"),document.getElementById("recipe")){const queryString=window.location.search,urlParams=new URLSearchParams(queryString);loadJSON(registerRecipe,"../data/"+urlParams.get("uid")+".json")}hideLoader()}}}();app.init();
//# sourceMappingURL=app.min.js.map